#!/bin/ksh
#
# get_Asset_mgmt
#
# This script adds the Asset_mgmt file as a data source
# The file was generated by combining the output from
# multiple queries of the Asset_mgmt database @ 
# http://midrange.czncorp.com/asset_mgmt/
#

function output_source
{
  # <enhancement> add logic here to only add source if updated
  echo "ASSETMGMT,${DATADIR}/asset_mgmt/Asset_mgmt.csv,CSV"
  return 0
}

function gather_source 
{
  logwrite "get_Asset_mgmt plugin running" 1
  # This is a static file only updated by manual edit

  # Add hosts to the Master List
  tail -n +2 ${DATADIR}/asset_mgmt/Asset_mgmt.csv | \
    cut -d"," -f1 | cut -d"." -f1 | \
    sed 's/[ \t]*//' | tr A-Z a-z >> ${TMP}/hostlist$$
  logwrite "get_Asset_mgmt plugin complete" 1
  return 0
}
# EOF
